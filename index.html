<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Roteiros - Reels & Stories</title>
    <meta name="description" content="Crie roteiros persuasivos para Reels e Stories com IA">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #a855f7;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #9333ea;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Ícones SVG
        const SendIcon = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="22" y1="2" x2="11" y2="13"></line>
                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
        );

        const LoaderIcon = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className="animate-spin">
                <path d="M21 12a9 9 0 1 1-6.219-8.56"></path>
            </svg>
        );

        const CopyIcon = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
        );

        const CheckIcon = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
        );

        const FilmIcon = () => (
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect>
                <line x1="7" y1="2" x2="7" y2="22"></line>
                <line x1="17" y1="2" x2="17" y2="22"></line>
                <line x1="2" y1="12" x2="22" y2="12"></line>
                <line x1="2" y1="7" x2="7" y2="7"></line>
                <line x1="2" y1="17" x2="7" y2="17"></line>
                <line x1="17" y1="17" x2="22" y2="17"></line>
                <line x1="17" y1="7" x2="22" y2="7"></line>
            </svg>
        );

        const SparklesIcon = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0z"></path>
            </svg>
        );

        const TrendingUpIcon = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                <polyline points="17 6 23 6 23 12"></polyline>
            </svg>
        );

        function App() {
            const [config, setConfig] = useState({
                quantidade: 5,
                foco: '',
                angulo: '',
                publico: '',
                formato: 'reels',
                promptPersonalizado: ''
            });
            
            const [roteiros, setRoteiros] = useState([]);
            const [isLoading, setIsLoading] = useState(false);
            const [copiedIndex, setCopiedIndex] = useState(null);
            const [error, setError] = useState('');

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setConfig(prev => ({
                    ...prev,
                    [name]: value
                }));
            };

            const gerarRoteiros = async () => {
                if (!config.foco || !config.publico) {
                    setError('Preencha pelo menos o FOCO e o PÚBLICO para gerar roteiros de qualidade!');
                    return;
                }

                setIsLoading(true);
                setError('');
                setRoteiros([]);

                const promptBase = config.promptPersonalizado || gerarPromptPadrao();

                try {
                    const response = await fetch("https://api.anthropic.com/v1/messages", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify({
                            model: "claude-sonnet-4-20250514",
                            max_tokens: 4000,
                            messages: [
                                { 
                                    role: "user", 
                                    content: promptBase
                                }
                            ]
                        })
                    });

                    if (!response.ok) {
                        throw new Error('Erro ao gerar roteiros');
                    }

                    const data = await response.json();
                    const roteirosGerados = parseRoteiros(data.content[0].text);
                    setRoteiros(roteirosGerados);
                    
                } catch (err) {
                    setError('Erro ao conectar com a IA. Verifique sua conexão.');
                    console.error(err);
                } finally {
                    setIsLoading(false);
                }
            };

            const gerarPromptPadrao = () => {
                return `# GERADOR DE ROTEIROS PARA ${config.formato.toUpperCase()} - ALTA CONVERSÃO

## CONTEXTO
Você é um especialista em criação de conteúdo viral para redes sociais, focado em gerar roteiros persuasivos e autênticos que convertem.

## CONFIGURAÇÃO DA TAREFA

**QUANTIDADE:** Crie exatamente ${config.quantidade} roteiros diferentes

**FOCO ESPECÍFICO:** ${config.foco}

**ÂNGULO PRINCIPAL:** ${config.angulo || 'Contraste (antes vs depois) + Prova social'}

**PÚBLICO-ALVO:** ${config.publico}

**FORMATO:** ${config.formato === 'reels' ? 'Reels (15-60 segundos)' : 'Stories (5-15 segundos cada card)'}

## ESTRUTURA OBRIGATÓRIA PARA CADA ROTEIRO

### GANCHO (0-3 segundos)
- Afirmação provocativa ou pergunta que para o scroll
- Deve ressoar com dor específica do público
- Usar contraste ou revelação

### CONTEXTO/PROBLEMA (3-15 segundos)
- Descrever situação atual do público
- Conectar com frustração/dor específica
- Explicar por que método antigo não funciona

### REVELAÇÃO/SOLUÇÃO (15-40 segundos)
- Apresentar novo método ou perspectiva
- Incluir história pessoal curta (opcional mas recomendado)
- Dar prova social ou dados específicos
- Criar contraste claro: ANTES vs DEPOIS

### CTA - CHAMADA PARA AÇÃO (40-50 segundos)
- Ação clara e específica
- Próximo passo tangível
- Urgência genuína (não artificial)

## FORMATO DE OUTPUT

Para cada roteiro, use este formato:

---
**ROTEIRO [NÚMERO] - [TÍTULO DESCRITIVO]**

**🎯 GANCHO (3s)**
[Texto exato do gancho]

**📍 CONTEXTO (12s)**
[Desenvolva o problema/dor]

**💡 REVELAÇÃO (25s)**
[Apresente a solução + história/prova]

**🔥 CTA (10s)**
[Chamada para ação clara]

**ANÁLISE:**
- Gatilhos: [Liste os gatilhos psicológicos usados]
- Melhor momento: [Quando postar esse conteúdo]
- Formato visual: [Sugestões de como filmar]
---

## DIRETRIZES DE QUALIDADE

✅ OBRIGATÓRIO:
- Cada roteiro deve ter ângulo diferente
- Usar dados/números específicos quando possível
- Tom direto mas respeitoso
- Foco em valor real, não só polêmica
- Gatilhos psicológicos: medo, urgência, esperança, contraste

❌ PROIBIDO:
- Generalizar ou atacar pessoas
- Fazer promessas impossíveis
- Ser genérico demais
- Usar clichês de coach
- Criar urgência completamente artificial

Agora crie os ${config.quantidade} roteiros seguindo exatamente esta estrutura.`;
            };

            const parseRoteiros = (texto) => {
                const roteirosArray = [];
                const blocos = texto.split(/---+/).filter(b => b.trim());
                
                blocos.forEach((bloco, index) => {
                    if (bloco.includes('ROTEIRO') || bloco.includes('GANCHO')) {
                        roteirosArray.push({
                            id: index,
                            conteudo: bloco.trim()
                        });
                    }
                });
                
                return roteirosArray.length > 0 ? roteirosArray : [{ id: 0, conteudo: texto }];
            };

            const copiarRoteiro = (texto, index) => {
                navigator.clipboard.writeText(texto);
                setCopiedIndex(index);
                setTimeout(() => setCopiedIndex(null), 2000);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 p-4 md:p-8">
                    <div className="max-w-6xl mx-auto">
                        
                        {/* Header */}
                        <div className="text-center mb-8">
                            <div className="flex items-center justify-center gap-3 mb-4">
                                <div className="text-purple-600">
                                    <FilmIcon />
                                </div>
                                <h1 className="text-4xl md:text-5xl font-bold bg-gradient-to-r from-purple-600 via-pink-600 to-orange-600 bg-clip-text text-transparent">
                                    Gerador de Roteiros
                                </h1>
                            </div>
                            <p className="text-gray-600 text-lg">
                                Crie roteiros persuasivos para Reels e Stories com IA
                            </p>
                        </div>

                        <div className="grid md:grid-cols-2 gap-6">
                            
                            {/* Painel de Configuração */}
                            <div className="bg-white rounded-2xl shadow-xl p-6 space-y-6">
                                <div className="flex items-center gap-2 mb-4">
                                    <div className="text-purple-600">
                                        <SparklesIcon />
                                    </div>
                                    <h2 className="text-2xl font-bold text-gray-800">Configuração</h2>
                                </div>

                                {/* Quantidade */}
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">
                                        Quantos roteiros gerar?
                                    </label>
                                    <input
                                        type="number"
                                        name="quantidade"
                                        min="1"
                                        max="10"
                                        value={config.quantidade}
                                        onChange={handleInputChange}
                                        className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition"
                                    />
                                </div>

                                {/* Formato */}
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">
                                        Formato do conteúdo
                                    </label>
                                    <select
                                        name="formato"
                                        value={config.formato}
                                        onChange={handleInputChange}
                                        className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition"
                                    >
                                        <option value="reels">Reels (15-60s)</option>
                                        <option value="stories">Stories (5-15s)</option>
                                    </select>
                                </div>

                                {/* Foco */}
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">
                                        Foco Específico *
                                    </label>
                                    <textarea
                                        name="foco"
                                        value={config.foco}
                                        onChange={handleInputChange}
                                        placeholder="Ex: Desvalorizar cursos baratos que não entregam resultado"
                                        className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition resize-none"
                                        rows="3"
                                    />
                                    <p className="text-xs text-gray-500 mt-1">O que você quer criticar ou destacar?</p>
                                </div>

                                {/* Ângulo */}
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">
                                        Ângulo Principal
                                    </label>
                                    <input
                                        type="text"
                                        name="angulo"
                                        value={config.angulo}
                                        onChange={handleInputChange}
                                        placeholder="Ex: Medo + Urgência + Esperança"
                                        className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition"
                                    />
                                    <p className="text-xs text-gray-500 mt-1">Quais emoções quer despertar?</p>
                                </div>

                                {/* Público */}
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">
                                        Público-Alvo *
                                    </label>
                                    <textarea
                                        name="publico"
                                        value={config.publico}
                                        onChange={handleInputChange}
                                        placeholder="Ex: Mulheres 25-35 anos, empreendedoras iniciantes que já compraram curso e não tiveram resultado"
                                        className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition resize-none"
                                        rows="3"
                                    />
                                    <p className="text-xs text-gray-500 mt-1">Seja específico: idade, ocupação, dores</p>
                                </div>

                                {/* Prompt Personalizado */}
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">
                                        Prompt Personalizado (Opcional)
                                    </label>
                                    <textarea
                                        name="promptPersonalizado"
                                        value={config.promptPersonalizado}
                                        onChange={handleInputChange}
                                        placeholder="Deixe em branco para usar o prompt otimizado padrão, ou cole seu próprio prompt aqui..."
                                        className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition resize-none font-mono text-sm"
                                        rows="6"
                                    />
                                </div>

                                {/* Botão Gerar */}
                                <button
                                    onClick={gerarRoteiros}
                                    disabled={isLoading}
                                    className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold py-4 px-6 rounded-xl hover:from-purple-700 hover:to-pink-700 transition transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center justify-center gap-2 shadow-lg"
                                >
                                    {isLoading ? (
                                        <>
                                            <LoaderIcon />
                                            Gerando roteiros...
                                        </>
                                    ) : (
                                        <>
                                            <SendIcon />
                                            Gerar Roteiros
                                        </>
                                    )}
                                </button>

                                {error && (
                                    <div className="bg-red-50 border-2 border-red-200 rounded-xl p-4 text-red-700 text-sm">
                                        {error}
                                    </div>
                                )}
                            </div>

                            {/* Painel de Resultados */}
                            <div className="bg-white rounded-2xl shadow-xl p-6">
                                <div className="flex items-center gap-2 mb-4">
                                    <div className="text-pink-600">
                                        <TrendingUpIcon />
                                    </div>
                                    <h2 className="text-2xl font-bold text-gray-800">Roteiros Gerados</h2>
                                </div>

                                {roteiros.length === 0 && !isLoading && (
                                    <div className="text-center py-16 text-gray-400">
                                        <div className="opacity-30 mb-4 flex justify-center">
                                            <FilmIcon />
                                        </div>
                                        <p className="text-lg">Configure e gere seus roteiros</p>
                                        <p className="text-sm mt-2">Os resultados aparecerão aqui</p>
                                    </div>
                                )}

                                {isLoading && (
                                    <div className="text-center py-16">
                                        <div className="mb-4 flex justify-center">
                                            <LoaderIcon />
                                        </div>
                                        <p className="text-gray-600">Criando roteiros incríveis...</p>
                                    </div>
                                )}

                                <div className="space-y-4 max-h-[calc(100vh-200px)] overflow-y-auto pr-2">
                                    {roteiros.map((roteiro, index) => (
                                        <div 
                                            key={roteiro.id}
                                            className="bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-5 border-2 border-purple-100 hover:border-purple-300 transition"
                                        >
                                            <div className="flex justify-between items-start mb-3">
                                                <span className="bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-bold">
                                                    Roteiro {index + 1}
                                                </span>
                                                <button
                                                    onClick={() => copiarRoteiro(roteiro.conteudo, index)}
                                                    className="flex items-center gap-2 bg-white px-3 py-1 rounded-lg hover:bg-purple-100 transition text-sm font-medium"
                                                >
                                                    {copiedIndex === index ? (
                                                        <>
                                                            <CheckIcon />
                                                            <span className="text-green-600">Copiado!</span>
                                                        </>
                                                    ) : (
                                                        <>
                                                            <CopyIcon />
                                                            <span className="text-gray-600">Copiar</span>
                                                        </>
                                                    )}
                                                </button>
                                            </div>
                                            
                                            <div className="bg-white rounded-lg p-4 text-sm text-gray-700 whitespace-pre-wrap font-mono">
                                                {roteiro.conteudo}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {/* Footer */}
                        <div className="text-center mt-8 text-gray-500 text-sm">
                            <p>💡 Dica: Quanto mais específico você for nos campos, melhores serão os roteiros!</p>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
